extends layout
include mixins

block content
    .container(style="max-width: 480px;")
        .player(x-data="radioPlayer()" x-init="init()")
            .player-controls
                audio#player-audio(
                    x-ref="audio"
                    :src="streamUrl"
                    preload="none"
                    crossorigin="anonymous"
                )
                button.btn-play(@click="togglePlay()")
                    i.fa-solid.fa-play(x-show="!playing")
                    i.fa-solid.fa-pause(x-show="playing")
            #visualizer.audio-visualizer
            .player-status
                .live-indicator(:class="isLive ? 'on-air' : 'offline'")
                    span(x-text="isLive ? 'ON AIR' : 'OFF'")
                    i.fa-regular.fa-circle-dot(:style="{ color: isLive ? '#e53935' : '#333' }")

        //- Now Playing Metadata
        .now-playing(x-show="isLive")
            template(x-if="currentTrack.title")
                .now-playing-content
                    .now-playing-label NOW PLAYING
                    .track-info
                        span.track-title(x-text="currentTrack.title")
                        template(x-if="currentTrack.artist")
                            span.track-artist
                                | —
                                span(x-text="currentTrack.artist")
                    template(x-if="currentShow")
                        .show-name(x-text="currentShow")
            template(x-if="!currentTrack.title && isLive")
                .metadata-loading Loading...

    section.hero
        .about-preview
            .section-title
                img.about-content(src="/public/assets/blob-about.svg")
            .about-content
                p BUG Radio is on a mission to create a dynamic and interactive community radio in The Hague and it is striving to truly be a community radio, exploring the boundaries of radio as a medium for artistic expression and community connection.
                a.read-more(href="/about") ▶ READ MORE

    section.main-content
        .schedule-section
            h2.section-title
                span.title-schedule SCHEDULE (CET)

            if scheduleByDay && scheduleByDay.length
                each dayGroup in scheduleByDay
                    .schedule-day-block
                        .schedule-date= dayGroup.date
                        .schedule-list
                            each episode in dayGroup.episodes
                                +schedule-card(episode)
            else
                p.no-schedule No upcoming programs scheduled

            a.read-more(href="/schedule") ▶ SEE FULL SCHEDULE

        .shows-section
            h2.section-title
                span.title-shows SHOWS

            if shows && shows.length
                .card-grid.card-grid--compact
                    each show in shows.slice(0, 4)
                        +show-card(show, 'compact')
            else
                p.no-shows No shows available yet

            a.read-more(href="/shows") ▶ SEE ALL SHOWS
